services:
  icecast:
    image: moul/icecast
    container_name: jaren-nul-icecast
    restart: unless-stopped
    ports:
      - "8000:8000"
    environment:
      - ICECAST_SOURCE_PASSWORD=hackme
      - ICECAST_ADMIN_PASSWORD=hackme
      - ICECAST_RELAY_PASSWORD=hackme

  mopidy:
    image: wesleydv938/jaren-nul-mopidy:latest
    container_name: jaren-nul-mopidy
    restart: unless-stopped
    ports:
      - "6680:6680"   # Web interface
      - "6600:6600"   # MPD protocol
    volumes:
      - mopidy-local:/var/lib/mopidy/local
    environment:
      - TZ=Europe/Brussels
      - SPOTIFY_CLIENT_ID=${SPOTIFY_CLIENT_ID}
      - SPOTIFY_CLIENT_SECRET=${SPOTIFY_CLIENT_SECRET}
    depends_on:
      - icecast

  sync-service:
    image: wesleydv938/jaren-nul-sync:latest
    container_name: jaren-nul-sync
    restart: unless-stopped
    environment:
      - MOPIDY_HOST=mopidy
      - MOPIDY_PORT=6680
    depends_on:
      - mopidy

volumes:
  mopidy-local:
